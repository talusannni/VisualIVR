"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4841],{94841:function(e,t,s){s.r(t);var a=s(47568),r=s(70655),i=s(85893),n=s(89583),u=s(16037),l=(s(11887),s(76906)),o=s(12543),c=s(11163),d=s(88767),p=s(67294);t.default=function(e){var t=e.snippet_slug,s=e.likes,b=e.snippet_id,h=(0,p.useState)(s),x=(h[0],h[1]),f=(0,c.useRouter)(),v=(0,u.a)({middleware:"guest"}).user,g=((0,d.useMutation)(),(0,p.useState)(!1)),m=g[0],w=g[1],k=(0,d.useQuery)("likestatus",(0,a.Z)((function(){var e;return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return e={snippet_id:b,user_id:null===v||void 0===v?void 0:v.id},"/api/likestatus",[4,l.Z.post("/api/likestatus",e)];case 1:return[2,t.sent().data]}}))}))),_=(k.isLoading,k.data),M=k.refetch,N=function(){var e=(0,a.Z)((function(){var e,s;return(0,r.__generator)(this,(function(a){switch(a.label){case 0:return w(!0),v?(e={snippet_id:b,user_id:v.id},"/api/likesnippets",[4,l.Z.post("/api/likesnippets",e)]):[3,2];case 1:return 200==(s=a.sent()).data.status&&(x(s.data.likes),M(),(0,o.Z)("".concat(s.data.message),"".concat(s.data.type))),w(!1),[3,3];case 2:f.push("/login?referer=/snippets/".concat(t),"/login"),a.label=3;case 3:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("button",{onClick:N,"aria-label":"Like",disabled:m,className:"".concat((null===_||void 0===_?void 0:_.status)?"bg-blue-400 text-white":"text-blue-400"," h-8 w-8 flex items-center justify-center border-[2px] p-[7px] rounded  transition-all duration-500 hover:bg-blue-400 cursor-pointer hover:text-white border-blue-400"),children:m?(0,i.jsxs)("svg",{class:"animate-spin h-4 w-4 ".concat((null===_||void 0===_?void 0:_.status)?"bg-blue-400 text-white":"text-blue-400"),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,i.jsx)("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),(0,i.jsx)("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,i.jsx)(n.nM7,{size:15})})})}},11887:function(e,t,s){var a=s(85893);t.Z=function(e){var t=e.labelValue,s=Math.abs(Number(t))>=1e9?(Math.abs(Number(t))/1e9).toFixed(1)+"B":Math.abs(Number(t))>=1e6?(Math.abs(Number(t))/1e6).toFixed(1)+"M":Math.abs(Number(t))>=1e3?(Math.abs(Number(t))/1e3).toFixed(1)+"K":Math.abs(Number(t));return(0,a.jsx)(a.Fragment,{children:s})}}}]);